import sma.system.agents.ecoRobot.interfaces.IRobotOperations
import sma.system.agents.logging.interfaces.ILog
import sma.system.agents.ecoRobot.interfaces.IRobotStatus
import sma.common.pojo.Position
import sma.common.pojo.Colors
import sma.system.environment.services.interfaces.IInteraction
import sma.system.environment.services.interfaces.IPerception
import sma.system.agents.ecoRobot.interfaces.IExecute
import sma.system.agents.ecoRobot.interfaces.ISensors
import sma.system.agents.ecoRobot.interfaces.IKnowledge
import sma.system.agents.ecoRobot.interfaces.IActionBuffer
import sma.system.agents.ecoRobot.interfaces.IActuators
import components.environment.Environment

namespace components.agent.ecoRobot {
	
	component Perception {
		provides perceive: IExecute
		requires sensors: IPerception
		requires knowledge: IKnowledge
	}

	component Decision {
		provides decide: IExecute
		requires actionBuffer: IActionBuffer
		requires knowledge: IKnowledge
	}

	component Action {
		provides act: IExecute
		requires actuators: IActuators
		requires envInteraction : IInteraction
		provides actionBuffer : IActionBuffer
	}
	
	
	ecosystem EcoRobot {
		
//		requires env: Environment
		
		requires elog: ILog
		
		species Robot(maxEnergy: float, robotColor: Colors, initPosition: Position) {
			
			provides operations: IRobotOperations
			provides status: IRobotStatus
			
			requires log: ILog

//			requires envInteraction : IInteraction
//			requires envPerception : IPerception
//				bind envInteraction to env.interactionService
//				bind envPerception to env.perceptionService
			part perception: Perception {
				bind sensors to sensors
				bind knowledge to knowledge
			}

			part decision: Decision {
				bind knowledge to knowledge
				bind actionBuffer to action.actionBuffer
			}

			part action: Action {
				bind actuators to actuators
				bind envInteraction to env.interactionService
				
			}

			provides actuators: IActuators
			provides sensors: IPerception
			provides knowledge: IKnowledge

			provides execute: IExecute
			
			part env: Environment
			
		}
	}
}